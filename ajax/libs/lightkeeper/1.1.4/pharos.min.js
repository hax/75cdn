!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.pharos=e():t.pharos=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.isNumber=function(t){return!isNaN(t)&&"number"==typeof t},e.isEmpty=function(t){return"object"===(void 0===t?"undefined":n(t))?"{}"===JSON.stringify(t):!t},e.build_query=function(t){var e=[];for(var r in t){var o=t[r];"object"===(void 0===o?"undefined":n(o))&&(o=JSON.stringify(o)),e.push(encodeURIComponent(r)+"="+encodeURIComponent(o))}return e.join("&")},e.getPerformance=function(){var e=t.performance;return e||console.log("Browser doesn't support Performance API"),e},e.sendLog=function(e){e&&(t.sadLog=new Image,t.sadLog.onload=t.sadLog.onerror=function(){delete t.sadLog},t.sadLog.src=e)}}).call(e,n(0))},function(t,e,n){"use strict";(function(e){var r=n(3),o=new r;e.addEventListener("load",function(){var t=document.querySelector("script[data-siteid][data-host]");o.site_id=t.getAttribute("data-siteid"),o.host=t.getAttribute("data-host")}),t.exports=o}).call(e,n(0))},function(t,e,n){"use strict";(function(e){function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),u=n(4),s="info",c="addPerfData",f={};t.exports=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,t),this.site_id=e,this.host=n,this[s]={},this[c]=this.addPerf(),this.listenError(r)}return i(t,[{key:"listenError",value:function(t){var n=this,r=t.onError;e.addEventListener&&e.addEventListener("error",function(t){if(t){var e=t.error&&t.error.stack||t.message;"function"==typeof r&&(e=r(t)),e&&n.send(e)}})}},{key:"addPerf",value:function(){var t=this;return new Promise(function(n){return e.addEventListener("load",function(){return setTimeout(function(){t.add(u()),n(),t[c]=Promise.resolve()})})})}},{key:"monitor",value:function(t){var e=this;return this[c].then(function(){return e.send(t)})}},{key:"send",value:function(t){var n=this.host;/^(http|\/\/)/i.test(n)||(n=location.protocol+"//"+n);var r=n+"/api/disp?",o={info:{},site_id:this.site_id,screen:e.screen.width+"x"+e.screen.height};"string"==typeof t?o.error=t:o.info=a.isEmpty(t)?this[s]:t,a.sendLog(r+a.build_query(o))}},{key:"time",value:function(t){f[t]=Date.now()}},{key:"timeEnd",value:function(t){var e=Date.now();f[t]||(f[t]=e);var n=e-f[t];this.add(t,n),console.log(t+": "+n+"ms"),delete f[t]}},{key:"add",value:function(t,e){var n=t;a.isNumber(e)&&(n=r({},t,e));for(var o in n)a.isNumber(n[o])&&(this[s][o]=n[o]);return!0}},{key:"delete",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)delete this[s][e[r]];return!0}},{key:"clear",value:function(){var t={};for(var e in this[s])t[e]=this[s][e],this.delete(e);return t}},{key:"search",value:function(t){return this[s][t]}}]),t}()}).call(e,n(0))},function(t,e,n){"use strict";var r=n(1);t.exports=function(){var t=r.getPerformance();if(!t)return{};var e=t.timing,n={};return n.loadPage=e.loadEventEnd-e.navigationStart,n.domReady=e.domComplete-e.responseEnd,n.redirect=e.redirectEnd-e.redirectStart,n.lookupDomain=e.domainLookupEnd-e.domainLookupStart,n.ttfb=e.responseStart-e.navigationStart,n.request=e.responseEnd-e.requestStart,n.loadEvent=e.loadEventEnd-e.loadEventStart,n.appcache=e.domainLookupStart-e.fetchStart,n.unloadEvent=e.unloadEventEnd-e.unloadEventStart,n.connect=e.connectEnd-e.connectStart,n}}])});